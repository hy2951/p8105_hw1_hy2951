---
title: "P8105 Hw1-hy2951"
author: "Haochen Yu"
output: github_document
date: "2025-09-20"
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
```

```{r}
#Problem 1
#Load the necessary packages
library(moderndive) #provide the data set
library(ggplot2) #plotting
library(scales) #for date_labels (switch the date from Chinese to English)

#Load the data set into the session
data("early_january_weather")

#Compute the values for inline reporting
n_rows <- nrow(early_january_weather) #number of observations
n_cols <- ncol(early_january_weather) #number of variables
mean_temp <- mean(early_january_weather$temp, na.rm = TRUE) #mean temperature without missing value

#Build a scatterplot
p_temp <- ggplot(early_january_weather,
                 aes(x = time_hour, y = temp, color = humid)) + #map the variables to axes and color
          geom_point(alpha = 0.7) + #reduce overplotting
          scale_x_datetime(labels = label_date(format = "%b %d", locale = "en")) +   #setup date label from Chinese to English
          labs(title = "NYC Early January Weather: Temperature vs Time",
               x = "Time (hourly)",
               y = "Temperature (째F)",
               color = "Humidity") # Add title and axis labels

p_temp #print the plot

ggsave("figs/temp_vs_time_humid.png", plot = p_temp, width = 8, height = 5, dpi = 300) #save the plot

```

Data set description
This data set contains hourly weather observations from NYC's Central Park station during early January. It has `r n_rows` rows and `r n_cols` columns. The variables are: `r toString(names(early_january_weather))`. The key variables are `time_hour`, `temp`, `humid`. The mean temperature over this period is `r round(mean_temp,1)` 째F

Interpretation of the figure:
The plot shows temperatures follow a daily cycle, being lower at night and higher during the day. Temperatures vary from below 30 째F to above 50 째F. The higher humidity is generally associated with lower temperatures. And lower humidity is generally associated with higher temperatures.

```{r}
#Problem 2
#Load tidyverse for data manipulation
library(tidyverse)

#Generate a random sample of size 10 from a standard Normal distribution
set.seed(123) #set seed for reproducibility
num_var <- rnorm(10)

# Create a logical vector 
log_var <- num_var>0

#Create a character vector of length 10
char_var <- c("A", "B", "C", "D" ,"E" ,"F", "G", "H", "I", "J")

#Create a factor vector of length 10 with 3 different levels
fact_var <- factor(rep(c("low", "medium", "high"),length.out=10))

#Combine into a dataframe
df <- tibble(num_var,log_var,char_var,fact_var)
df

#Taking the mean of each variable
mean(pull(df,num_var)) #works
mean(pull(df,log_var))#works because false =0 and true=1
mean(pull(df,char_var))#does not work because characters cannot be averaged
mean(pull(df,fact_var))#does not work because factors cannot be averaged
```

```{r, results='hide'}
#convert variables into numeric form 
as.numeric(pull(df,log_var)) # false=0 and true =1
as.numeric(pull(df,char_var))# all variables becomes NA
as.numeric(pull(df,fact_var))# it converts factor level to 1,2,3
```

After creating a dataframe containing: numeric variables, logical variables, character variables, and factor variables, using the pull function to calculate the mean value. The results shown as follow: the mean of numeric variable works. The mean of the logical variable also works, because R converts True to 1 and False to 0. The mean of the character variable fails, because characters cannot be averaged. And the mean of the factor variables fails, because factors are categorical. Applying the as.numeric shows that logicals are converted to 0 or 1, characters become NA, and factors are converted to internal integers. This explains why numeric and logical means work but the other variables means do not work.



